[HEADER]
VERSION=4

[_EXTENSION]
TORQUE_MODE_EX=2
FIX_PROGRESSIVE_RATE=1
USE_DWB2=0
DAMPER_LUTS=1

;[ODE]                          ;optional - tuning these parameters can help with stability. See Open Dynamics Engine Manual (http://ode.org/wiki/index.php/Manual#Joint_error_and_the_Error_Reduction_Parameter_.28ERP.29) for more information.
;ERP=0.9                        ;this is the AC default for certain joint types, others (and global value) are 0.3
;CFM=1                          ;*10^-7 - just did this to keep numbers more reasonable

[_EXTENSION_FLEX]
TORSIONAL_STIFFNESS=10000  ; Nm/deg
TORSIONAL_DAMPING=100 

[BASIC]
WHEELBASE=2.475
CG_LOCATION=0.555
;C&D 240SX SE S13 Hatch 52.8% 1269kg with fuel?
;Driver 0.5% rearward

[ARB]
EXTEND=1
FRONT_MOTION_RATIO=1.0
FRONT=19991
REAR_MOTION_RATIO=1.0
REAR=7200
;F ARB diameter = N/A
;F ARB MR = 0.554^2
;F ARB Droplink angle = 0deg = 1.0 
;F ARB dimension X = 274 (155)
;F ARB dimension Y = 828 (828)
;F ARB dimension Z = 286 (167)

;R ARB diameter = N/A
;R ARB MR = 0.436^2
;R ARB Droplink angle = 0deg = 1.0
;R ARB dimension X = 297 (146)
;R ARB dimension Y = 763 (763)
;R ARB dimension Z = 324 (173)	

[FRONT]
TYPE=COSMIC
BASEY=-0.25				
TRACK=1.545
;1.465 S13 JDM
;1.465 200SX EUDM
;1.480 S14 JDM
;1.470 S15 JDM
HUB_MASS=46.1
;40.0 S13 Zenki
;43.3 180SX Type II
;42.3 180SX Type X
;46.1 Drift
RIM_OFFSET=0.020
;0.030 wheel + 0.010 spacer

;S13 Front Drift Geo

;RCA DELTAS = -0.00925, -0.040, +0.00475

;High
;X = sin31.0 = 0.09825 + (0.51503807 * -0.020) = 0.08794
;Z = sin59.0 = -0.07462 + (0.8571673 * 0.020) = -0.05747
;STEER_JOINT_0_POS_A=0.0000, 0.0000, +0.0125
;STEER_JOINT_0_POS_B=+0.0010, 0.0000, 0.0000

;Low
;X = sin31.0 = 0.09825 + (0.51503807 * -0.022) = 0.08691
;Z = sin59.0 = -0.07462 + (0.8571673 * 0.022) = -0.05576
;STEER_JOINT_0_POS_A=0.0000, 0.0000, +0.0250
;STEER_JOINT_0_POS_B=+0.0010, 0.0000, 0.0000

DJ0=F_S13_LCA_FRONT
DJ0_BODY_A=CHASSIS
DJ0_BODY_B=HUB_L
DJ0_POS_A=0.38250, -0.0800, 0.25125
DJ0_POS_B=0.08450, -0.1200, 0.01225

DJ1=F_S13_LCA_REAR
DJ1_BODY_A=CHASSIS
DJ1_BODY_B=HUB_L
DJ1_POS_A=0.40625, -0.0700, 0.02250
DJ1_POS_B=0.08450, -0.1200, 0.01225
DJ1_KP=0

STEER_JOINT_0=F_S13_TOE
STEER_JOINT_0_BODY_A=CHASSIS
STEER_JOINT_0_BODY_B=HUB_L
STEER_JOINT_0_POS_A=0.4125, -0.0750, -0.06250 ;Stock
STEER_JOINT_0_POS_A_1=0.4125, -0.0750, -0.05000 ;High
STEER_JOINT_0_POS_A_2=0.4125, -0.0750, -0.03750 ;Low

STEER_JOINT_0_POS_B=0.09825, -0.1225, -0.07462 ;Stock
STEER_JOINT_0_POS_B_1=0.08894, -0.1225, -0.05747 ;High
STEER_JOINT_0_POS_B_2=0.08791, -0.1225, -0.05576 ;Low

DJ2=F_S13_STRUT_TOP
DJ2_BODY_A=CHASSIS
DJ2_BODY_B=F_S13_STRUT_BODY
DJ2_POS_A=0.2589, 1.4615, -0.2471
DJ2_POS_B=0.22312, 0.4800, -0.0590

DJ3=F_S13_STRUT_CAMBER
DJ3_BODY_A=CHASSIS
DJ3_BODY_B=F_S13_STRUT_BODY
DJ3_POS_A=1.2225, 0.4436, -0.059
DJ3_POS_B=0.22312, 0.4800, -0.0590

DJ4=F_S13_STRUT_CASTER
DJ4_BODY_A=CHASSIS
DJ4_BODY_B=F_S13_STRUT_BODY
DJ4_POS_A=0.2231, 0.6682, 0.9231
DJ4_POS_B=0.22312, 0.4800, -0.0590
DJ4_KP=1

;S13 Front Sim Stuff

BODY_0_NAME=F_S13_STRUT_BODY
BODY_0_MASS=1
BODY_0_INERTIA=0.1, 0.1, 0.1
BODY_0_POS=0.22312, 0.4800, -0.0590
BODY_0_MIRROR=1

SLIDER_0=F_S13_STRUT_SLIDER
SLIDER_0_BODY_A=F_S13_STRUT_BODY
SLIDER_0_BODY_B=HUB_L
SLIDER_0_POS_A=0.22312, 0.4800, -0.0590
SLIDER_0_POS_B=0.21000, 0.1200, 0.0100
SLIDER_0_PARITY=-1

TOE_OUT=0.00000 ;-0.05
STATIC_CAMBER=-1.31 ;-4.00
STEER_JOINT_0_LENGTH_OFFSET=0.00051 ;Steer Toe
DJ3_LENGTH_OFFSET=-0.02001 ;Strut Camber
DJ1_LENGTH_OFFSET=0.00000 ;LCA R Camber
DJ4_LENGTH_OFFSET=0.00501 ;Strut Caster
DJ0_LENGTH_OFFSET=-0.00000 ;LCA F Caster
;30L, Driver, Drift

[FRONT_COILOVER_0] ;Corner spring
ELECT_LOG=CORNER
PULL_FORCE=0
PRELOAD_FORCE=0
PRELOAD=0.013 ;0.050, 0.013
;(Drift -0.040 @ wheel, -0.037 @ damper)

BODY_A=F_S13_STRUT_BODY
BODY_B=HUB_L
POS_A=0.22312, 0.4800, -0.0590
POS_B=0.21000, 0.1200, 0.0100

MIN_LENGTH=0.25178
MAX_LENGTH=0.36478
BUMPSTOP_GAP=0.075

;DAMPER_TRAVEL = 0.078, 0.035
;PACKER_HEIGHT = 0.040
;BUMPSTOP_GAP = 0.038 + 0.037 = 0.075 
;DAMPER_LENGTH = 0.36678 - 0.037 = 0.32978

;Tuned 78/35 -40

INSTALL_RATE=520000
RATE=78480

[REAR]
TYPE=COSMIC
BASEY=-0.21					
TRACK=1.540
;1.460 S13 JDM
;1.465 200SX EUDM
;1.470 S14 JDM
;1.460 S15 JDM
HUB_MASS=48.1
;43.9 S13 Zenki
;45.3 180SX Type II
;44.3 180SX Type X
;48.1 Drift
RIM_OFFSET=0.030

;S13 Rear Geo

DJ0=R_S13_UCA_FRONT
DJ0_BODY_A=R_S13_SUBFRAME_B1
DJ0_BODY_B=HUB_L
DJ0_POS_A=0.28360, 0.12500, 0.15544
DJ0_POS_B=0.11928, 0.13139, 0.04595

DJ1=R_S13_UCA_REAR
DJ1_BODY_A=R_S13_SUBFRAME_B1
DJ1_BODY_B=HUB_L
DJ1_POS_A=0.40277, 0.12800, -0.09500
DJ1_POS_B=0.09928, 0.13639, -0.05000
DJ1_KP=1

DJ2=R_S13_LCA_FRONT
DJ2_BODY_A=R_S13_SUBFRAME_B1
DJ2_BODY_B=HUB_L
DJ2_POS_A=0.26228, 0.01168, 0.28340
DJ2_POS_A_1=0.26228, -0.00332, 0.28340
DJ2_POS_A_2=0.26228, -0.01832, 0.28340
DJ2_POS_A_3=0.26228, -0.03332, 0.28340
DJ2_POS_B=0.10346, -0.10000, 0.00000

DJ3=R_S13_LCA_REAR
DJ3_BODY_A=R_S13_SUBFRAME_B1
DJ3_BODY_B=HUB_L
DJ3_POS_A=0.38870, -0.07177, 0.03300
DJ3_POS_B=0.10346, -0.10000, 0.00000
DJ3_KP=0

STEER_JOINT_0=R_S13_TOE
STEER_JOINT_0_BODY_A=R_S13_SUBFRAME_B1
STEER_JOINT_0_BODY_B=HUB_L
STEER_JOINT_0_POS_A=0.54000, 0.00400, -0.12905
STEER_JOINT_0_POS_B=0.18932, -0.01100, -0.16511

;S13 Rear Adjusters

SLIDER_0=R_S13_SUBFRAME_B0_SLIDER
SLIDER_0_BODY_A=CHASSIS_REAR
SLIDER_0_BODY_B=R_S13_SUBFRAME_B0
SLIDER_0_POS_A=0.3050, 0.2250, 0.1200
SLIDER_0_POS_B=0.3050, 0.1250, 0.1200
SLIDER_0_PARITY=-1

HJ1=R_S13_SUBFRAME_HINGE
HJ1_BODY_A=R_S13_SUBFRAME_B0
HJ1_BODY_B=R_S13_SUBFRAME_B1
HJ1_POS_A=0.2050, 0.1250, 0.1200
HJ1_POS_B=0.4050, 0.1250, 0.1200
HJ1_PARITY=-1  

DJ4=R_S13_SUBFRAME_FRONT_ADJUSTER
DJ4_BODY_A=CHASSIS_REAR
DJ4_BODY_B=R_S13_SUBFRAME_B1
DJ4_POS_A=0.1700, 0.0500, 0.4400
DJ4_POS_B=0.1700, -0.0500, 0.4400

DJ5=R_S13_SUBFRAME_REAR_ADJUSTER
DJ5_BODY_A=CHASSIS_REAR
DJ5_BODY_B=R_S13_SUBFRAME_B1
DJ5_POS_A=0.4400, 0.2000, -0.2000
DJ5_POS_B=0.4400, 0.1000, -0.2000

;S13 Rear Sim Stuff

BODY_1_NAME=R_S13_SUBFRAME_B0
BODY_1_MASS=1
BODY_1_INERTIA=0.1, 0.1, 0.1
BODY_1_POS=0.3050, 0.1250, 0.1200
BODY_1_MIRROR=1

BODY_2_NAME=R_S13_SUBFRAME_B1
BODY_2_MASS=1
BODY_2_INERTIA=0.1, 0.1, 0.1
BODY_2_POS=0.3050, 0.1250, 0.1200
BODY_2_MIRROR=1

BODY_0_NAME=CHASSIS_REAR
BODY_0_MASS=485.317
;1285 - ((46.1 * 2) + (48.1 * 2) + (1 * 6)))  * (1 - 0.555)
BODY_0_INERTIA=1.220, 1.240, 4.220
BODY_0_CARPOS=0, 0, 0

HJ0=TORSION_HINGE
HJ0_BODY_A=CHASSIS
HJ0_BODY_B=CHASSIS_REAR
HJ0_CARPOS_A=0, 0, 1
HJ0_CARPOS_B=0, 0, -1

ENGINE_TORQUE_BODY=CHASSIS_REAR

TOE_OUT=0.00000 ;+0.10
STATIC_CAMBER=-1.11 ;-0.00
STEER_JOINT_0_LENGTH_OFFSET=-0.01131 ;Steer Toe
DJ1_LENGTH_OFFSET=-0.00501 ;UCA R Camber
DJ2_LENGTH_OFFSET=-0.01501 ;LCA F Camber
DJ3_LENGTH_OFFSET=-0.01501 ;LCA R Camber
DJ0_LENGTH_OFFSET=-0.00701 ;UCA F Bumpsteer
DJ4_LENGTH_OFFSET=0.00000 ;Spacer F
DJ5_LENGTH_OFFSET=0.00000 ;Spacer R
;30L, Driver, Drift

[REAR_COILOVER_0] ;Corner spring
ELECT_LOG=CORNER
PULL_FORCE=0
PRELOAD_FORCE=0
PRELOAD=0.007 ;0.039, 0.007
;(Drift -0.030 @ wheel, -0.032 @ damper)

BODY_A=CHASSIS_REAR
BODY_B=HUB_L
POS_A=0.28879, 0.43701, -0.03000
POS_B=0.16318, -0.08520, -0.10500

MIN_LENGTH=0.42632
MAX_LENGTH=0.59132
BUMPSTOP_GAP=0.096

;DAMPER_TRAVEL = 0.084, 0.081
;PACKER_HEIGHT = 0.020
;BUMPSTOP_GAP = 0.064 + 0.032 = 0.096
;DAMPER_LENGTH = 0.54232 - 0.032 = 0.51032

;Tuned 84/81 -30

INSTALL_RATE=810000
RATE=58860

[REAR_TORSION_0]
RATE=6600
PRELOAD=0
HINGE=TORSION_HINGE
PARITY=0

[REAR_DAMPER_0] ;Torsion damper
BODY_A=CHASSIS
BODY_B=CHASSIS_REAR
POS_A=0, 1, 0
POS_B=0, 0, 0
DAMP_BUMP=10000
DAMP_FAST_BUMP=10000
DAMP_FAST_BUMPTHRESHOLD=1
DAMP_REBOUND=10000
DAMP_FAST_REBOUND=10000
DAMP_FAST_REBOUNDTHRESHOLD=1
PARITY=0

[GRAPHICS_OFFSETS]
WHEEL_LF=-0.02
SUSP_LF=-0.02
WHEEL_RF=0.02
SUSP_RF=0.02
WHEEL_LR=-0.02
SUSP_LR=-0.02
WHEEL_RR=0.02
SUSP_RR=0.02

[DAMAGE]
MIN_VELOCITY=40				;MINUMUM VELOCITY TO START TAKING DAMAGE
GAIN=0.0004					;AMOUNT OF STEER ROD DEFLECTION FOR IMPACT KMH
MAX_DAMAGE=0.05			;MAXIMUM AMOUNT OF STEER ROD DEFLECTION ALLOWED
DEBUG_LOG=1					;ACTIVATES DAMAGE DEBUG IN THE LOG